<div [class.well]="schema.name">

<div *ngIf="schema.name">
 <h4 id="schema" (click)="onClicked(schema)"><i class="fa fa-lg fa-newspaper-o"></i> {{schema.name}}</h4>
</div>

<div  style="margin-left:25px" *ngIf="schema.pages">
   <a (click)="showElementAddForm('page')"> <i class="fa fa-plus-square"></i> Add new page</a>
   <div *ngIf="pageToggle">
     <form [formGroup]="addElementForm" noValidate>
       <div *ngFor="let question of propertyModelArray">
        <app-dynamic-question [question]="question" [_form]="addElementForm"></app-dynamic-question>
       </div>
       <button (click)="addElement(addElementForm.value,null)" class="btn btn-primary btn-sm"  [disabled]="!addElementForm.valid">Create</button>
       <button (click)="pageToggle=false" class="btn btn-default btn-sm">Cancel</button>
     </form>
      </div>
</div>
  <div *ngFor="let page of schema.pages; let i=index;">
    <a [href]="'#page'+i" data-toggle="collapse"><i class="fa fa-chevron-down"></i></a>
    
   
 <label (click)="onClicked(page,i)" class="element">{{page.label}}</label>
      <form [formGroup]="editForm" *ngIf="editPageMode && elementLabel == page.label">
        <div *ngFor="let property of propertyModelArray">
        <app-dynamic-question [question]="property" [_form]="editForm"></app-dynamic-question>
        </div>
      <button (click)="editElement(editForm.value,i,null)" class="btn btn-primary btn-sm" [disabled]="!editForm.valid">Save</button>
        <button (click)="editPageMode=false" class="btn btn-default btn-sm">Cancel</button>
      </form>
    
      <div style="float:right;" [hidden]="editPageMode">
      <a><i (click)="displayEditElementForm(page)" class="fa fa-pencil" aria-hidden="true"></i></a>
      <a><i class="fa fa-trash-o" aria-hidden="true"  style="color:red" (click)="deleteDialog(page,'Page',i)"></i></a>
    </div>
   
    
    <div [id]="'page'+ i" class="collapse">
     <app-navigator [pageIndex]="i" [_schema]="page" [formSchema]="_formSchema"></app-navigator>
     </div>
    </div>
</div>




<div style="margin-left:25px" *ngIf="schema.sections">

  <a (click)="showElementAddForm('section')"><i class="fa fa-plus-square"></i> Add new section</a>
  <div *ngIf="sectionToggle">
    <div *ngFor="let question of propertyModelArray">
     <form [formGroup]="addElementForm" noValidate>
      <app-dynamic-question [_form]="addElementForm" [question]="question"></app-dynamic-question> 
     </form>
      </div>
    <button (click)="addElement(addElementForm.value,pageIndex)" class="btn btn-primary btn-sm" [disabled]="!addElementForm.valid">Create</button>
       <button (click)="sectionToggle=false" class="btn btn-default btn-sm">Cancel</button>
  </div>
  <div *ngFor="let section of schema.sections; let j= index;">
    <a [href]="'#section'+pageIndex+j" data-toggle="collapse"><i class="fa fa-chevron-down"> </i></a>
    
    <label (click)="onClicked(section,pageIndex,j)" class="element">{{section.label}}</label>
      <form [formGroup]="editForm" *ngIf="editSectionMode && elementLabel == section.label">
        <div *ngFor="let property of propertyModelArray">
        <app-dynamic-question [question]="property" [_form]="editForm"></app-dynamic-question>
      </div>
      <button type="button" (click)="editElement(editForm.value,pageIndex,j)" class="btn btn-primary btn-sm" [disabled]="!editForm.valid">Save</button>
      <button (click)="editSectionMode=false" class="btn btn-default btn-sm">Cancel</button>
      </form>

    <div style="float:right;" [hidden]="editPageMode || editSectionMode">
      <a><i (click)="displayEditElementForm(section)" class="fa fa-pencil" aria-hidden="true"></i></a>
      <a><i class="fa fa-trash-o" aria-hidden="true"  style="color:red" (click)="deleteDialog(section,'Section',pageIndex,j)"></i></a>
    </div>

    <div [id]="'section'+pageIndex+j" class="collapse">
    <app-navigator [sectionIndex]="j" [_schema]="section" [formSchema]="_formSchema" [pageIndex]="pageIndex"></app-navigator>
  </div>
  </div>

</div>


<div style="margin-left:25px" *ngIf="schema.questions">
  <a (click)="createNewQuestion(pageIndex,sectionIndex)"><i class="fa fa-plus-square"></i>Add new question</a>
  <div *ngFor="let question of schema.questions; let k=index;">
    <a [href]="'#question'+sectionIndex+k" data-toggle="collapse"></a>
      <p class="element" (click)="onClicked(question,pageIndex,sectionIndex,k)">{{question.label}}</p>

    <div style="float:right;" [hidden]="editPageMode || editSectionMode">
      <a><i (click)="editQuestion(question,pageIndex,sectionIndex,k)" class="fa fa-pencil" aria-hidden="true"></i></a>
      <a><i class="fa fa-trash-o" aria-hidden="true"  style="color:red" (click)="deleteDialog(question,'Question',pageIndex,sectionIndex,k)"></i></a>
    </div>


    <div [id]="'question'+sectionIndex+k" class="collapse">
    <app-navigator [_schema]="question" ></app-navigator>
</div>
</div>
 <hr/>
</div>
